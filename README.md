
# 🚀 Upscayv - AI Video Upscaler by Upscayl
이 프로그램은 Upscayl CLI와 FFmpeg을 활용하여 단일 이미지 업스케일링 도구인 Upscayl을 동영상 업스케일링 전용 도구로 확장해주는 파이썬 스크립트입니다. 현재 폴더의 영상을 자동으로 감지하고, 원하는 해상도(HD~8K)로 손쉽게 변환할 수 있습니다.

## 저장소
https://github.com/benant/benant_upscayv


## ✨ 주요 기능

* 자동 영상 감지: 폴더 내 .mp4 파일을 검색하여 선택 메뉴 제공
* 해상도 프리셋: HD, FHD, 4K, 8K 중 목표 해상도 선택 가능
* 지능형 배수 계산: 목표 해상도에 맞춰 AI 모델 배수(2x, 4x) 자동 설정
* 자동 경로 감지: Upscayl 실행 파일 및 모델 폴더를 자동으로 찾아 설정
* 자동 GPU 감지: NVIDIA GPU가 있으면 NVENC 인코더, 없으면 CPU 인코딩으로 자동 전환
* 실시간 진행률: tqdm을 통한 업스케일링 진행 상태 시각화
* 자동 리소스 관리: 작업 후 대용량 임시 프레임 파일 삭제 기능

## 🛠️ 사전 준비 사항

프로그램 실행을 위해 아래 도구들이 설치되어 있어야 합니다.

* Python 3.x: python.org
* FFmpeg: 시스템 환경 변수(PATH)에 등록되어 있어야 합니다.
  * 설치 확인: 터미널에서 `ffmpeg -version` 입력
* Upscayl: Windows에 설치되어 있어야 합니다.
  * 프로그램이 일반적인 설치 경로에서 자동으로 찾습니다.
  * 수동 설치 경로: `%LOCALAPPDATA%\Programs\upscayl\upscayl-bin.exe` 또는 `%PROGRAMFILES%\upscayl\upscayl-bin.exe`
* NVIDIA GPU (선택사항): 하드웨어 가속을 위해 NVIDIA 그래픽카드와 최신 드라이버가 필요합니다.
  * NVIDIA GPU가 없어도 CPU 인코딩으로 자동 전환됩니다.

## 📦 설치 방법

저장소 클론 또는 스크립트 복사

필요 라이브러리 설치:

```Bash
pip install tqdm
```

## ⚙️ 설정 (Configuration)

**자동 설정 기능**: 프로그램은 시작 시 다음 항목들을 자동으로 감지합니다.

* **Upscayl 경로**: PATH 환경 변수 및 일반적인 Windows 설치 경로에서 자동 검색
* **모델 폴더**: Upscayl 설치 디렉토리에서 models 폴더 자동 탐색
* **비디오 인코더**: NVIDIA GPU가 있으면 `h264_nvenc`, 없으면 `libx264` 자동 선택

대부분의 경우 추가 설정 없이 바로 사용할 수 있습니다. 만약 자동 감지에 실패하면 프로그램이 안내 메시지를 표시합니다.

> **참고**: 특정 경로를 수동으로 설정하려면 `upscayv.py` 파일의 설정 영역을 수정할 수 있습니다.

## 🚀 실행 방법

1. 업스케일링할 .mp4 파일들을 스크립트와 같은 폴더에 넣습니다.
2. 터미널에서 스크립트를 실행합니다:
	```Bash
	python upscayv.py
	```
3. 프로그램 시작 시 자동으로 다음을 감지합니다:
	* Upscayl 실행 파일 경로
	* 모델 폴더 경로
	* 사용 가능한 비디오 인코더 (NVIDIA GPU 여부 확인)
4. 화면의 안내에 따라 다음을 선택합니다:
	* 영상 선택: 작업할 파일 번호 입력 (파일이 1개면 자동 선택)
	* 목표 해상도: 1(HD) ~ 4(8K) 중 선택
5. 작업이 완료되면 `output_해상도_파일명.mp4` 파일이 생성됩니다.

## 📂 작업 구조

프로그램 실행 시 아래와 같은 단계로 데이터가 처리됩니다:

1. Extract: 영상을 개별 PNG 프레임으로 분할 (temp_frames/)
2. Upscale: AI 모델을 통한 이미지 고해상도화 (upscaled_frames/)
3. Merge: 프레임 재합성, 오디오 병합 및 최종 리사이징
4. Clean: 사용자의 선택에 따라 임시 폴더 삭제

## ⚠️ 주의 사항

* 디스크 공간: 동영상 프레임을 무손실 PNG로 추출하므로, 영상 길이에 따라 수십 GB의 여유 공간이 필요할 수 있습니다.
* 처리 시간: AI 업스케일링은 하드웨어 성능에 따라 매우 오래 걸릴 수 있는 작업입니다. (테스트 후 장시간 작업을 권장합니다.)

## 📄 라이선스
이 스크립트는 오픈 소스이며 자유롭게 수정 및 배포가 가능합니다. 단, Upscayl 및 Real-ESRGAN 모델의 라이선스를 준수해야 합니다.

